

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Key Concepts - Understanding Time &mdash; QuantConnect-old-documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Key Concepts - Supported Libraries" href="04-supported-libraries.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> QuantConnect-old-documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Key Concepts:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01-getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="02-developing-in-the-ide.html">Developing in the IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="03-faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-supported-libraries.html">Supported Libraries</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Understanding Time</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ticks-bars-and-the-time-frontier">Ticks, Bars and the Time Frontier</a></li>
<li class="toctree-l2"><a class="reference internal" href="#batch-vs-stream-analysis">Batch vs Stream Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#algorithm-time-zone">Algorithm Time Zone</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QuantConnect-old-documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Key Concepts - Understanding Time</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/01-Key-Concepts/05-understanding-time.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="key-concepts-understanding-time">
<h1>Key Concepts - Understanding Time<a class="headerlink" href="#key-concepts-understanding-time" title="Permalink to this headline">¶</a></h1>
<style>
.videoWrapper {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 */
  height: 0;
}
.videoWrapper iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
</style>
<div class="videoWrapper">
<iframe src="https://player.vimeo.com/video/420736510" width="640" height="360" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The core technology behind QuantConnect algorithmic trading is an event-based, streaming analysis system called <a class="reference external" href="https://www.lean.io">LEAN</a>. LEAN attempts to model the stream of time as accurately as possible, presenting data (“events”) to your algorithms in the order it arrives, as you would experience in reality.</p>
<p>All QuantConnect algorithms have this time-stream baked in as the primary event handler: OnData(slice). The Slice object represents all of the data at a moment of time, a <em>“time-slice”</em>. No matter what data you request, you receive it in the order created according to simulated algorithm time. By only letting your algorithm see the present and past moments, we can prevent the most common quantitative-analysis error, <a class="reference external" href="https://www.investopedia.com/terms/l/lookaheadbias.asp">look-ahead bias</a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="ticks-bars-and-the-time-frontier">
<h2>Ticks, Bars and the Time Frontier<a class="headerlink" href="#ticks-bars-and-the-time-frontier" title="Permalink to this headline">¶</a></h2>
<p>Data comes in two different “shapes” according to the time period it covers: point values, or period values. These have different properties in LEAN which determine when the data is emitted to your algorithm. The coordination of emitting this data is controlled by the <em>Time Frontier</em>. In QuantConnect, Ticks are point values, and Bars have a period.</p>
<div class="figure align-default">
<img alt="https://cdn.quantconnect.com/docs/i/time-v-endtime_rev0.png" src="https://cdn.quantconnect.com/docs/i/time-v-endtime_rev0.png" />
</div>
<p><strong>The Time Frontier</strong></p>
<p>QuantConnect allows your algorithm to request data for multiple securities and multiple resolutions. This creates a situation where one of your data subscriptions is ready to emit, but another subscription with a longer period may still be constructing its bar. To coordinate this data we use the <em>End Time</em> of a data point to transmit it to your algorithm.</p>
<div class="figure align-default">
<img alt="https://cdn.quantconnect.com/docs/i/time-frontier_rev1.gif" src="https://cdn.quantconnect.com/docs/i/time-frontier_rev1.gif" />
</div>
<p>Once a datapoint’s <em>EndTime</em> has passed, it will be transmitted to your algorithm OnData() method. For bar data, this is the beginning of the <em>next</em> bar. Your algorithm is only permitted to access values of securities from before this Time Frontier, preventing you from accidentally looking into the future.</p>
<p>The Time property in your algorithm is always equal to this Time Frontier. This is also used as the timestamp for any <a class="reference external" href="https://www.quantconnect.com/docs/algorithm-reference/logging-and-debug">logging and debugging</a> messages.</p>
<p><strong>Bar Data - Period Values</strong></p>
<p>Bar data represents the aggregation of a period of data into a single object. In QuantConnect, we make this easy for you by pre-aggregating billions of raw trade-ticks into <em>Trade Bars</em>, and quote-ticks into <em>Quote Bars</em>.</p>
<p>The close of a bar is not known until the start of the next bar, which can sometimes be confusing. For example, a price bar for Friday will include all the ticks from Friday 00:00 to Friday 23:59.99999, but it will actually be emitted to your algorithm on Saturday at midnight. Because of this, any orders you create after analyzing the Friday data will be sent to your brokerage on Saturday, when most markets are closed. QuantConnect automatically turns your order into a MarketOnOpen order, which will be filled Monday morning.</p>
<div class="figure align-default">
<img alt="https://cdn.quantconnect.com/docs/i/bar-stream_rev0.png" src="https://cdn.quantconnect.com/docs/i/bar-stream_rev0.png" />
</div>
<p>When there are no ticks during a period, the previous bar transmitted is copied and emitted at the request resolution. In QuantConnect, this is the default behavior for bar data and it is referred to as “filling the data forward”. You can configure whether this is enabled when you <a class="reference external" href="https://www.quantconnect.com/docs/algorithm-reference/initializing-algorithms#Initializing-Algorithms-Selecting-Asset-Data">request the security data</a>.</p>
<p>QuantConnect provides data in Second, Minute, Hour, and Daily bar format. To create other periods of bars, you need to <a class="reference external" href="https://www.quantconnect.com/docs/algorithm-reference/consolidating-data">consolidate</a> these short periods into larger ones.</p>
<p><strong>Tick Data - Point Values</strong></p>
<p>Tick data represents a single trade or quote made on the market. It is a discrete event that does not have a period of time attached to it. These events are emitted as soon as they arrive to LEAN.</p>
<div class="figure align-default">
<img alt="https://cdn.quantconnect.com/docs/i/tick-stream_rev2.png" src="https://cdn.quantconnect.com/docs/i/tick-stream_rev2.png" />
</div>
<p>Tick objects have the same value of Time and EndTime because they have no period. They represent instantaneous point values and cannot be filled forward.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="batch-vs-stream-analysis">
<h2>Batch vs Stream Analysis<a class="headerlink" href="#batch-vs-stream-analysis" title="Permalink to this headline">¶</a></h2>
<p>Backtesting platforms come in two general varieties, batch processing or event streaming.</p>
<p>Batch processing backtesting is much simpler. It loads all data into an array and passes it to your algorithm for analysis. Because your algorithm has access to future data points, it is easy to introduce look-ahead bias. Most home-grown analysis tools are batch systems.</p>
<p>QuantConnect/LEAN is a streaming analysis system. In live trading, data points are generated one after another over time. QuantConnect models this in backtesting, streaming data to your algorithm in fast-forward. Because of this, you do not have access to price data beyond the Time Frontier. Although streaming analysis is slightly trickier to understand, it allows your algorithm to seamlessly work in backtests and live trading with no code changes.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="algorithm-time-zone">
<h2>Algorithm Time Zone<a class="headerlink" href="#algorithm-time-zone" title="Permalink to this headline">¶</a></h2>
<p>Algorithm time is accessed from the Time property of QCAlgorithm. Algorithm time defaults to New York timezone for UTC-4 in summer, and UTC-5 in winter. This can be configured by passing an accepted time zone name into the SetTimeZone() method. A full list of time zone names can be found on <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">Wikipedia</a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="04-supported-libraries.html" class="btn btn-neutral float-left" title="Key Concepts - Supported Libraries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, QuantConnect

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>